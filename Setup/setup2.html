<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="../style.css">
  <script>
    const Store = require('electron-store');
    const settings = new Store();
  </script>
  <style>
    input#nextbutton {
      display: none;
    }
  </style>
</head>

<body>

<h1 id="bar">Google Assistant <input type="button" class="green" id="nextbutton"
                                               onclick="checkConnection();" value="Next"></h1>
<div id="center">
  <h2 class="words">Would you like to install Google Assistant now? You can install it later.</h2>
  <input type="button" class="green" id="install" onclick="installGoogleAssistant();" value="Install"> <input type="button" id="skip" onclick="window.location = '../index.html'" value="Skip">
</div>
<script>
  function installGoogleAssistant() {
    if (settings.get("firstTimeOpeningExternalApp", true)) {
      alert("Do not click minimize after this window is opened, it will disappear until reboot and will slow down your smartdisplay until then.");
      settings.set("firstTimeOpeningExternalApp", false);
      installGoogleAssistant();
      return;
    }
    var exec = require('child_process').exec;
    exec('google-chrome-stable --app=https://assistant.google.com/', function (error, stdout, stderr) {
      console.log(stdout);
      console.log(stderr);
      if (error) throw error;
    });
    document.getElementById("nextbutton").style.display = "inline";
    document.getElementById("install").classList.remove("green");
  }
</script>
</body>

</html>