<!--
Copyright (C) 2022 The Fake Slim Shady

SPDX-License-Identifier: MIT
-->

<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="../style.css">

  <script>
    const Store = require('electron-store');
    const settings = new Store();
  </script>
  <style>
    .err {
        color: orange;
    }
  </style>
</head>

<body>
<div class="wallpaper-container">
  <span class="wallpaper-text-container">
    <span class="wallpaper-title">SmartDisplayPi</span><br>
    <span>Tactical Tree</span>
  </span><img src="../media/default-background.jpg" class="wallpaper-wallpaper">
</div>
<div id="bar">
  <button class="p-btn" disabled="">Finish</button>
  <button class="p-btn" disabled="" onclick="window.location = 'setup3.html'" id="nextbutton">Next</button>
  <button class="p-btn" onclick="window.location = 'setup1.html'">Previous</button>
</div>
<div id="center">
  <h2 class="words">Would you like to see a cursor?</h2>
    <p>Will take effect next reboot</p>
  <input type="button" class="p-btn p-prim-col" id="install" onclick="noCursor();" value="No"> <input class="p-btn" type="button" id="skip" onclick="window.location = 'setup3.html'" value="Yes">
</div>
<script>
  const root = require('electron-root-path').rootPath;
  function noCursor() {
    const command = 'cd ' + root + ' && RAWSLIMCONF=$(<assets/slim_NOCURSOR.conf) && echo "${RAWSLIMCONF/\\[SMARTDISPLAYPI_USER_HERE_YOUR_MOM\\]/"$USER"}" | sudo tee /etc/slim.conf > /dev/null';
    const { exec } = require("child_process");

    exec(command, (error, stdout, stderr) => {
      if (error) {
        console.log(`error: ${error.message}`);
        alert("Error!");
        return;
      }
      if (stderr) {
        console.log(`stderr: ${stderr}`);
        alert("Error!");
        return;
      }
      console.log(`stdout: ${stdout}`);
      window.location = "setup3.html"
    });
  }
</script>
</body>

</html>